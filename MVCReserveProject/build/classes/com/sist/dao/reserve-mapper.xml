<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sist.dao.reserve-mapper">
	<!--  -->
	<!-- 영화를 선택 => type => 1번만 => 현재상영 영화만. -->
	<select id="movieListData" resultType="MovieVO">
	SELECT mno, title, poster, score, theaterNo
	FROM movie
	WHERE type=1
	</select>
	
	<!-- 영화마다 극장이 어디서 상영되는지 알기위해서 맨처음 영화 선택시 그 영화가 극장값을 갖고있어야하기 때문에.. -->
	<update id="movieTheaterUpdate" parameterType="MovieVO">
	UPDATE movie SET 
	theaterNo=#{theaterNo}
	WHERE mno=#{mno}
	</update>
	
	<!-- 영화한개를 선택하면 ReserveTheaterVO 의 tno를 찾아서 가져옴! ,,,로 tno를 임의로 랜덤으로 저장해놓았었음. -->
	<select id="movieTheaterData" resultType="ReserveTheaterVO" parameterType="int">
		SELECT tno, tname, tloc, tdate
		FROM reserveTheater
		WHERE tno=#{tno}
	</select>
	<update id="movieDataUpdate" parameterType="ReserveTheaterVO">
		UPDATE reserveTheater SET
		tdate=#{tdate}
		WHERE tno=#{tno}
	</update>
	
	<!-- datevo에 time에 값을 채울예정! -->
	<update id="movieTimeUpdate" parameterType="ReserveDateVO">
		UPDATE reservedate SET
		time=#{time}
		WHERE tno=#{tno}
	</update>
	<select id="movieTimeData" resultType="string" parameterType="int">
		SELECT time 
		FROM reserveDate
		WHERE tno=#{tno}
	</select>
	
	<select id="movieTimeData2" resultType="string" parameterType="int">
		SELECT time 
		FROM reserveTime
		WHERE tno=#{tno}
	
	</select>
	
	<select id="movieIdCount" resultType="int" parameterType="String">
	 	SELECT COUNT(*) FROM member
	 	WHERE id=#{id}
	
	</select>
	<select id="movieGetPwd" resultType="MemberVO" parameterType="String">
		SELECT id,admin,name, pwd 
		FROM member
		WHERE id=#{id}
	
	</select>
	
	
	
</mapper>